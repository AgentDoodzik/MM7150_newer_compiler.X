/*
 *  15.07.2016
 *  Author: PN
 *  FileInfo:
 */
//******************************************************************************
//* I N C L U D E  S E C T I O N 
//******************************************************************************
#include "MM7150user.h"
#include "MM7150config.h"
#include <stdint.h>
//#include "MM7150user_funcs.h"
#include "p32mz2048efh064.h"
//******************************************************************************
//* D E F I N E  S E C T I O N 
//******************************************************************************
#define ReadI2C 0x81 // ADDRESS 0x38 OF FT5306 + READ BIT
#define WriteI2C 0x80 // ADDRESS 0x38 OF FT5306 + WRITE BIT

#define COUNTER_5S 100000
#define COUNTER_1S 20000
//******************************************************************************
//* E N U M  T Y P E 
//******************************************************************************
typedef enum // MASZYNA STANÓW NR 1 DO RESETOWANIA MM I DECYZJI CZY ODCZYTAC CZY WYS?A? DO MM 
{
    I2Cunconfigured= 0,
    ResetMM7150,
    IdleIMU,
    InitIMU,
    Writing,
    Reading    
}MM7150State;
typedef enum // MASZYNA STANÓW NR 2 DO WYSY?ANIA DANYCH KONFIGURACYJNYCH Z TABLIC
{
    ConfigIdle= 0,
    Starting,
    AckingSlave,
    RepeatStarting,
    Read,
    AckingMaster,   
    ReadData,
    Stoping,
    WaitForInterrupt,
    Stop
}MM7150ConfigStates;
typedef enum // MASZYNA STANÓW NR 3 DO WYSY?ANIA POSZCZEGÓLNYCH TABLIC
{
    WaitingForConfig= 0,
    SendingAccON,
    SendingCompON,
    SendingInciON,
    ReceivingData
}MM7150ReadingStates;
typedef enum // MASZYNA STANÓW NR 4 DO ODBIORU DANYCH PO FUZJI
{
    IdleRead= 0,
    WaitingForData,
    StartingRead,
    WritingAddress,
    ReadingLenghtPart1,
    ReadingLenghtPart2,
    ReadingType,
    ReadingState,
    ReadingEvent,
    ReadingDegreesPart1,
    ReadingDegreesPart2,
    ReadingXL,        
    ReadingXH,        
    ReadingYL,        
    ReadingYH,        
    ReadingZL,        
    ReadingZH,        
    ReadingShake,
    SendingConfirm, //ACK or NAK
    RepeatStartRead,
    StopingRead
}MM7150ReadingData;
//******************************************************************************
//* G L O B A L    V A R I A B L E S
//******************************************************************************

unsigned char  ReadValue= 0;

unsigned char IMUReadReqest= 0;

volatile unsigned int PeriodGlobal= 0;
signed short AccelerometerX= 0;
signed short AccelerometerY= 0;
signed short AccelerometerZ= 0;
signed short InclinometerX= 0;
signed short InclinometerY= 0;
signed short InclinometerZ= 0;
unsigned short Compass= 0; 

 
//******************************************************************************
//* P R I V A T E    V A R I A B L E S
//******************************************************************************
MM7150State IMUstate= I2Cunconfigured; 
MM7150ConfigStates IMUConfigSequence= ConfigIdle;
MM7150ReadingData IMUReadSequence= IdleIMU;
MM7150ReadingData IMUNextReadSequence= IdleRead;
MM7150ReadingStates IMUReadingStates= WaitingForConfig;

unsigned char BytesToRead= 0; // ILE ZOSTA?O BAJTOW TO ODCZYTU JUZ PO KONFIGURACJI
                              // OD AKC, INK, LUB KOMPASU
unsigned char TypeRead= 0;  // CO AKTULANIE CZYTA STEROWNIK
                            // = 1 TO AKC. 
                            // = 2 TO KOMPAS
                            // = 4 TO INKLIN.
unsigned char LastTypeRead= 0; // CO CZYTA? STEROWNIK OSTATNIO
unsigned char XL= 0, XH= 0;
signed char YL= 0, YH= 0;
unsigned char ZL= 0, ZH= 0;
unsigned char DegPart1= 0; // DLA KOMPASU
unsigned char DegPart2= 0; // DLA KOMPASU
unsigned char IntState= 0; // AKTUALNY STAN NA PINIE INTERRUPT
unsigned char LastIntState= 0; // ZMMIENNA ZAWIERA OSTATNI STAN NA PINIE INTERRUPT

unsigned short Temp= 0; // ZMIENNA AKTUALNIE WSKAZUJE CO BEDZIE WSYSY?ANE Z 
                        // TABLIC KONFUGURACYJNYCH 
unsigned int *TabToSend;// WSKA?NIK WSKAZUJE NA ADRES TABLIC KONFIGURACYJNYCH 
                        // DO WYS?ANIA
unsigned int Wait5s =0; // ZMIENNA ZABEZPIECZAJACA GDY = 100000 (624999? przy 32 MHz) CZYLI 15s (oryginalnie bylo 5ms!!!) STEROWNIK 
                        // SIE RESETUJE
unsigned int WaitSnd = 0;
unsigned char ReadOrWrite;  // ZMIENNA ZAWIERA ADRES SSC7150 Z BITEM DO OCZYTU 
                            // LUB ZAPISU
unsigned int Wait= 0; // <WCZESNIEJ - UNSIGNED SHORT, ZMIANA ZE WZGLEDU NA ROZMIAR> ZMIENNA POTRZEBNA PRZY INICJALIZAJI MM
unsigned short MaxInd; // ZMIENNA ZAWIERA DLUGO?C TABLICY AKTUALNIE WYSY?ANEJ
unsigned int PeriodPrivate; // ZMIENNA IKNREMENTOWANA CO 1 PRZY ODBIERNIU DANYCH
//******************************************************************************
//* C O N S T  T A B L E S
//******************************************************************************
/*
 * TABLCE ZAWIERAJA DANE DO:
 * - INICJALIZACJI MODULU,
 * - INICJALIZACJI POBIERANIA DANYCH Z AKCELEROMETRU, KOMPASU LUB INKLINOMETRU
 */
const unsigned int GetAcc[369]=
{
0xFFA,
0x05,
0x00,
0x31,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x01,
0x01,
0x02,
0x03,
0x02,
0x0A,
0x00,
0x04,
0x00,
0x04,
0x00,
0x01,
0x00,
0xD0,
0x07,
0x30,
0xF8,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x31,
0x03,
0x06,
0x00,
0x21,
0x00,
0x01,
0x01,
0x02,
0x02,
0x02,
0x0A,
0x00,
0x04,
0x00,
0x04,
0x00,
0x01,
0x00,
0xD0,
0x07,
0x30,
0xF8,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0x00,
0x4F,
0xFFA,
0x05,
0x00,
0x31,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x01,
0x01,
0x02,
0x02,
0x02,
0x0A,
0x00,
0x04,
0x00,
0x04,
0x00,
0x01,
0x00,
0xD0,
0x07,
0x30,
0xF8,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x31,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x01,
0x01,
0x02,
0x02,
0x02,
0x0A,
0x00,
0x04,
0x00,
0x04,
0x00,
0x01,
0x00,
0xD0,
0x07,
0x30,
0xF8,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x31,
0x03,
0x06,
0x00,
0x21,
0x00,
0x01,
0x01,
0x02,
0x02,
0x02,
0x0A,
0x00,
0x04,
0x00,
0x04,
0x00,
0x01,
0x00,
0xD0,
0x07,
0x30,
0xF8,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0x00,
0x4F,
0xFFA,
0x05,
0x00,
0x31,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x01,
0x01,
0x02,
0x02,
0x02,
0x0A,
0x00,
0x04,
0x00,
0x04,
0x00,
0x01,
0x00,
0xD0,
0x07,
0x30,
0xF8,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x31,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x01,
0x01,
0x02,
0x02,
0x02,
0x0A,
0x00,
0x04,
0x00,
0x04,
0x00,
0x01,
0x00,
0xD0,
0x07,
0x30,
0xF8,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x31,
0x03,
0x06,
0x00,
0x21,
0x00,
0x01,
0x01,
0x02,
0x02,
0x02,
0x0A,
0x00,
0x04,
0x00,
0x04,
0x00,
0x01,
0x00,
0xD0,
0x07,
0x30,
0xF8,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0x00,
0x4F,
0xFFA,
0x05,
0x00,
0x31,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x01,
0x01,
0x02,
0x02,
0x02,
0x0A,
0x00,
0x04,
0x00,
0x04,
0x00,
0x01,
0x00,
0xD0,
0x07,
0x30,
0xF8,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC
};
const unsigned int GetCompas[369]=
{
0xFFA,
0x05,
0x00,
0x32,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x02,
0x01,
0x02,
0x03,
0x02,
0x64,
0x00,
0x01,
0x00,
0x01,
0x00,
0x01,
0x00,
0x68,
0x01,
0x00,
0x00,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x32,
0x03,
0x06,
0x00,
0x21,
0x00,
0x02,
0x01,
0x02,
0x02,
0x02,
0x64,
0x00,
0x01,
0x00,
0x01,
0x00,
0x01,
0x00,
0x68,
0x01,
0x00,
0x00,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0x00,
0x4F,
0xFFA,
0x05,
0x00,
0x32,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x02,
0x01,
0x02,
0x02,
0x02,
0x64,
0x00,
0x01,
0x00,
0x01,
0x00,
0x01,
0x00,
0x68,
0x01,
0x00,
0x00,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x32,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x02,
0x01,
0x02,
0x02,
0x02,
0x64,
0x00,
0x01,
0x00,
0x01,
0x00,
0x01,
0x00,
0x68,
0x01,
0x00,
0x00,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x32,
0x03,
0x06,
0x00,
0x21,
0x00,
0x02,
0x01,
0x02,
0x02,
0x02,
0x64,
0x00,
0x01,
0x00,
0x01,
0x00,
0x00,
0x00,
0x68,
0x01,
0x00,
0x00,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0x00,
0x4F,
0xFFA,
0x05,
0x00,
0x32,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x02,
0x01,
0x02,
0x02,
0x02,
0x64,
0x00,
0x01,
0x00,
0x01,
0x00,
0x00,
0x00,
0x68,
0x01,
0x00,
0x00,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x32,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x02,
0x01,
0x02,
0x02,
0x02,
0x64,
0x00,
0x01,
0x00,
0x01,
0x00,
0x00,
0x00,
0x68,
0x01,
0x00,
0x00,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x32,
0x03,
0x06,
0x00,
0x21,
0x00,
0x02,
0x01,
0x02,
0x02,
0x02,
0x0A,
0x00,
0x01,
0x00,
0x01,
0x00,
0x00,
0x00,
0x68,
0x01,
0x00,
0x00,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0x00,
0x4F,
0xFFA,
0x05,
0x00,
0x32,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x02,
0x01,
0x02,
0x02,
0x02,
0x0A,
0x00,
0x01,
0x00,
0x01,
0x00,
0x00,
0x00,
0x68,
0x01,
0x00,
0x00,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC
};
const unsigned int GetIncli[369]=
{
0xFFA,
0x05,
0x00,
0x34,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x04,
0x01,
0x02,
0x03,
0x02,
0x64,
0x00,
0x01,
0x00,
0x01,
0x00,
0x01,
0x00,
0x68,
0x01,
0x98,
0xFE,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x34,
0x03,
0x06,
0x00,
0x21,
0x00,
0x04,
0x01,
0x02,
0x02,
0x02,
0x64,
0x00,
0x01,
0x00,
0x01,
0x00,
0x01,
0x00,
0x68,
0x01,
0x98,
0xFE,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0x00,
0x4F,
0xFFA,
0x05,
0x00,
0x34,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x04,
0x01,
0x02,
0x02,
0x02,
0x64,
0x00,
0x01,
0x00,
0x01,
0x00,
0x01,
0x00,
0x68,
0x01,
0x98,
0xFE,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x34,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x04,
0x01,
0x02,
0x02,
0x02,
0x64,
0x00,
0x01,
0x00,
0x01,
0x00,
0x01,
0x00,
0x68,
0x01,
0x98,
0xFE,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x34,
0x03,
0x06,
0x00,
0x21,
0x00,
0x04,
0x01,
0x02,
0x02,
0x02,
0x64,
0x00,
0x01,
0x00,
0x01,
0x00,
0x01,
0x00,
0x68,
0x01,
0x98,
0xFE,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0x00,
0x4F,
0xFFA,
0x05,
0x00,
0x34,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x04,
0x01,
0x02,
0x02,
0x02,
0x64,
0x00,
0x01,
0x00,
0x01,
0x00,
0x01,
0x00,
0x68,
0x01,
0x98,
0xFE,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x34,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x04,
0x01,
0x02,
0x02,
0x02,
0x64,
0x00,
0x01,
0x00,
0x01,
0x00,
0x01,
0x00,
0x68,
0x01,
0x98,
0xFE,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC,
0xFFA,
0x05,
0x00,
0x34,
0x03,
0x06,
0x00,
0x21,
0x00,
0x04,
0x01,
0x02,
0x02,
0x02,
0x0A,
0x00,
0x01,
0x00,
0x01,
0x00,
0x01,
0x00,
0x68,
0x01,
0x98,
0xFE,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0x00,
0x4F,
0xFFA,
0x05,
0x00,
0x34,
0x02,
0x06,
0x00,
0xFFB,
0x21,
0x00,
0x04,
0x01,
0x02,
0x02,
0x02,
0x0A,
0x00,
0x01,
0x00,
0x01,
0x00,
0x01,
0x00,
0x68,
0x01,
0x98,
0xFE,
0x0A,
0x00,
0x4D,
0x00,
0x43,
0x00,
0x48,
0x00,
0x50,
0x00,
0x73,
0x00,
0x66,
0xFFC  
};
const unsigned int IMUinitVal[3633]= 
{
0xFFA,
0x1,
0x0,
0xFFB,
0x1E,
0x0,
0x0,
0x1,
0x8D,
0x0C,
0x2,
0x0,
0x3,
0x0,
0x0D,
0x0,
0x0,
0x0,
0x0,
0x0,
0x5,
0x0,
0x6,
0x0,
0xD8,
0x4,
0x1,
0x0F,
0x50,
0x71,
0x0,
0x0,
0x0,
0xFFC,
0xFFA,
0x5,
0x0,
0x0,
0x8,
0xFFA,
0x5,
0x0,
0x0,
0x1,
0xFFB,
0x0,
0xFFC,
0xFFA,
0x2,
0x0,
0xFFB,
0x6,
0x0,
0xFF,
0x9,
0x1,
0xA1,
0x1,
0x85,
0x0E,
0x19,
0x0,
0x29,
0xFF,
0x15,
0x0,
0x26,
0xFF,
0x0,
0x75,
0x8,
0x95,
0x49,
0x81,
0x0,
0x19,
0x0,
0x29,
0xFF,
0x15,
0x0,
0x26,
0xFF,
0x0,
0x75,
0x8,
0x95,
0x8C,
0x91,
0x0,
0x19,
0x0,
0x29,
0xFF,
0x15,
0x0,
0x26,
0xFF,
0x0,
0x75,
0x8,
0x95,
0x0F,
0xB1,
0x0,
0xC0,
0x5,
0x20,
0x9,
0x1,
0xA1,
0x0,
0x85,
0x1,
0x5,
0x20,
0x9,
0x73,
0xA1,
0x0,
0x5,
0x20,
0x0A,
0x9,
0x3,
0x15,
0x0,
0x25,
0x2,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x30,
0x8,
0x0A,
0x31,
0x8,
0x0A,
0x32,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x16,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x40,
0x8,
0x0A,
0x41,
0x8,
0x0A,
0x42,
0x8,
0x0A,
0x43,
0x8,
0x0A,
0x44,
0x8,
0x0A,
0x45,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x19,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x50,
0x8,
0x0A,
0x51,
0x8,
0x0A,
0x52,
0x8,
0x0A,
0x53,
0x8,
0x0A,
0x54,
0x8,
0x0A,
0x55,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x0E,
0x3,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x52,
0x44,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0D,
0xB1,
0x2,
0x0A,
0x52,
0x54,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0D,
0xB1,
0x2,
0x0A,
0x52,
0x14,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0D,
0xB1,
0x2,
0x0A,
0x52,
0x24,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0D,
0xB1,
0x2,
0x0A,
0x52,
0x34,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0D,
0xB1,
0x2,
0x0A,
0x4,
0x3,
0x15,
0x0,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x8,
0x3,
0x75,
0x10,
0x95,
0x6,
0xB1,
0x3,
0x5,
0x20,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x2,
0x2,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x10,
0x8,
0x0A,
0x11,
0x8,
0x0A,
0x12,
0x8,
0x0A,
0x13,
0x8,
0x0A,
0x14,
0x8,
0x0A,
0x15,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x53,
0x4,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0D,
0x81,
0x2,
0x0A,
0x54,
0x4,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0D,
0x81,
0x2,
0x0A,
0x55,
0x4,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0D,
0x81,
0x2,
0x0A,
0x51,
0x4,
0x15,
0x0,
0x25,
0x1,
0x75,
0x8,
0x95,
0x1,
0x81,
0x2,
0xC0,
0x85,
0x2,
0x5,
0x20,
0x9,
0x83,
0xA1,
0x0,
0x5,
0x20,
0x0A,
0x9,
0x3,
0x15,
0x0,
0x25,
0x2,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x30,
0x8,
0x0A,
0x31,
0x8,
0x0A,
0x32,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x16,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x40,
0x8,
0x0A,
0x41,
0x8,
0x0A,
0x42,
0x8,
0x0A,
0x43,
0x8,
0x0A,
0x44,
0x8,
0x0A,
0x45,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x19,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x50,
0x8,
0x0A,
0x51,
0x8,
0x0A,
0x52,
0x8,
0x0A,
0x53,
0x8,
0x0A,
0x54,
0x8,
0x0A,
0x55,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x0E,
0x3,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x71,
0x44,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x71,
0x54,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x71,
0x14,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x71,
0x24,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x71,
0x34,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x4,
0x3,
0x15,
0x0,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x8,
0x3,
0x75,
0x10,
0x95,
0x6,
0xB1,
0x3,
0x5,
0x20,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x2,
0x2,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x10,
0x8,
0x0A,
0x11,
0x8,
0x0A,
0x12,
0x8,
0x0A,
0x13,
0x8,
0x0A,
0x14,
0x8,
0x0A,
0x15,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x75,
0x4,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0x0A,
0x85,
0x4,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0x0A,
0x86,
0x4,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0x0A,
0x87,
0x4,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0xC0,
0x85,
0x3,
0x5,
0x20,
0x9,
0x76,
0xA1,
0x0,
0x5,
0x20,
0x0A,
0x9,
0x3,
0x15,
0x0,
0x25,
0x2,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x30,
0x8,
0x0A,
0x31,
0x8,
0x0A,
0x32,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x16,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x40,
0x8,
0x0A,
0x41,
0x8,
0x0A,
0x42,
0x8,
0x0A,
0x43,
0x8,
0x0A,
0x44,
0x8,
0x0A,
0x45,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x19,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x50,
0x8,
0x0A,
0x51,
0x8,
0x0A,
0x52,
0x8,
0x0A,
0x53,
0x8,
0x0A,
0x54,
0x8,
0x0A,
0x55,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x0E,
0x3,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x56,
0x44,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0F,
0xB1,
0x2,
0x0A,
0x56,
0x54,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0F,
0xB1,
0x2,
0x0A,
0x56,
0x14,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0F,
0xB1,
0x2,
0x0A,
0x56,
0x24,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0F,
0xB1,
0x2,
0x0A,
0x56,
0x34,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0F,
0xB1,
0x2,
0x0A,
0x4,
0x3,
0x15,
0x0,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x8,
0x3,
0x75,
0x10,
0x95,
0x6,
0xB1,
0x3,
0x5,
0x20,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x2,
0x2,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x10,
0x8,
0x0A,
0x11,
0x8,
0x0A,
0x12,
0x8,
0x0A,
0x13,
0x8,
0x0A,
0x14,
0x8,
0x0A,
0x15,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x57,
0x4,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0F,
0x81,
0x2,
0x0A,
0x58,
0x4,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0F,
0x81,
0x2,
0x0A,
0x59,
0x4,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0F,
0x81,
0x2,
0xC0,
0x85,
0x4,
0x5,
0x20,
0x9,
0x86,
0xA1,
0x0,
0x5,
0x20,
0x0A,
0x9,
0x3,
0x15,
0x0,
0x25,
0x2,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x30,
0x8,
0x0A,
0x31,
0x8,
0x0A,
0x32,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x16,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x40,
0x8,
0x0A,
0x41,
0x8,
0x0A,
0x42,
0x8,
0x0A,
0x43,
0x8,
0x0A,
0x44,
0x8,
0x0A,
0x45,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x19,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x50,
0x8,
0x0A,
0x51,
0x8,
0x0A,
0x52,
0x8,
0x0A,
0x53,
0x8,
0x0A,
0x54,
0x8,
0x0A,
0x55,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x0E,
0x3,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x7E,
0x44,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x7E,
0x54,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x7E,
0x14,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x7E,
0x24,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x7E,
0x34,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x4,
0x3,
0x15,
0x0,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x8,
0x3,
0x75,
0x10,
0x95,
0x6,
0xB1,
0x3,
0x5,
0x20,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x2,
0x2,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x10,
0x8,
0x0A,
0x11,
0x8,
0x0A,
0x12,
0x8,
0x0A,
0x13,
0x8,
0x0A,
0x14,
0x8,
0x0A,
0x15,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x7F,
0x4,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0x0A,
0x80,
0x4,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0x0A,
0x81,
0x4,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0xC0,
0x85,
0x5,
0x5,
0x20,
0x9,
0x8A,
0xA1,
0x0,
0x5,
0x20,
0x0A,
0x9,
0x3,
0x15,
0x0,
0x25,
0x2,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x30,
0x8,
0x0A,
0x31,
0x8,
0x0A,
0x32,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x16,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x40,
0x8,
0x0A,
0x41,
0x8,
0x0A,
0x42,
0x8,
0x0A,
0x43,
0x8,
0x0A,
0x44,
0x8,
0x0A,
0x45,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x19,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x50,
0x8,
0x0A,
0x51,
0x8,
0x0A,
0x52,
0x8,
0x0A,
0x53,
0x8,
0x0A,
0x54,
0x8,
0x0A,
0x55,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x0E,
0x3,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x83,
0x44,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0D,
0xB1,
0x2,
0x0A,
0x83,
0x54,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0D,
0xB1,
0x2,
0x0A,
0x83,
0x14,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0D,
0xB1,
0x2,
0x0A,
0x83,
0x24,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0D,
0xB1,
0x2,
0x0A,
0x83,
0x34,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0D,
0xB1,
0x2,
0x0A,
0x4,
0x3,
0x15,
0x0,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x8,
0x3,
0x75,
0x10,
0x95,
0x6,
0xB1,
0x3,
0x5,
0x20,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x2,
0x2,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x10,
0x8,
0x0A,
0x11,
0x8,
0x0A,
0x12,
0x8,
0x0A,
0x13,
0x8,
0x0A,
0x14,
0x8,
0x0A,
0x15,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x83,
0x4,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x4,
0x55,
0x0D,
0x81,
0x2,
0xC0,
0x85,
0x6,
0x5,
0x20,
0x9,
0xE1,
0xA1,
0x0,
0x5,
0x20,
0x0A,
0x9,
0x3,
0x15,
0x0,
0x25,
0x2,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x30,
0x8,
0x0A,
0x31,
0x8,
0x0A,
0x32,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x16,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x40,
0x8,
0x0A,
0x41,
0x8,
0x0A,
0x42,
0x8,
0x0A,
0x43,
0x8,
0x0A,
0x44,
0x8,
0x0A,
0x45,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x19,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x50,
0x8,
0x0A,
0x51,
0x8,
0x0A,
0x52,
0x8,
0x0A,
0x53,
0x8,
0x0A,
0x54,
0x8,
0x0A,
0x55,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x0E,
0x3,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x43,
0x45,
0x15,
0x0,
0x26,
0x3,
0x0,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x43,
0x55,
0x15,
0x0,
0x26,
0x3,
0x0,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x43,
0x15,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x4D,
0x25,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x4D,
0x35,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x4,
0x3,
0x15,
0x0,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x8,
0x3,
0x75,
0x10,
0x95,
0x6,
0xB1,
0x3,
0x5,
0x20,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x2,
0x2,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x10,
0x8,
0x0A,
0x11,
0x8,
0x0A,
0x12,
0x8,
0x0A,
0x13,
0x8,
0x0A,
0x14,
0x8,
0x0A,
0x15,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x44,
0x5,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0x0A,
0x45,
0x5,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0x0A,
0x46,
0x5,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0x0A,
0x47,
0x5,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0xC0,
0x85,
0x7,
0x5,
0x20,
0x9,
0xE1,
0xA1,
0x0,
0x5,
0x20,
0x0A,
0x9,
0x3,
0x15,
0x0,
0x25,
0x2,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x30,
0x8,
0x0A,
0x31,
0x8,
0x0A,
0x32,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x16,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x40,
0x8,
0x0A,
0x41,
0x8,
0x0A,
0x42,
0x8,
0x0A,
0x43,
0x8,
0x0A,
0x44,
0x8,
0x0A,
0x45,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x19,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x50,
0x8,
0x0A,
0x51,
0x8,
0x0A,
0x52,
0x8,
0x0A,
0x53,
0x8,
0x0A,
0x54,
0x8,
0x0A,
0x55,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x0E,
0x3,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x43,
0x45,
0x15,
0x0,
0x26,
0x3,
0x0,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x43,
0x55,
0x15,
0x0,
0x26,
0x3,
0x0,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x43,
0x15,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x4D,
0x25,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x4D,
0x35,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x4,
0x3,
0x15,
0x0,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x8,
0x3,
0x75,
0x10,
0x95,
0x6,
0xB1,
0x3,
0x5,
0x20,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x2,
0x2,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x10,
0x8,
0x0A,
0x11,
0x8,
0x0A,
0x12,
0x8,
0x0A,
0x13,
0x8,
0x0A,
0x14,
0x8,
0x0A,
0x15,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x44,
0x5,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0x0A,
0x45,
0x5,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0x0A,
0x46,
0x5,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0x0A,
0x47,
0x5,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0xC0,
0x85,
0x8,
0x5,
0x20,
0x9,
0xE1,
0xA1,
0x0,
0x5,
0x20,
0x0A,
0x9,
0x3,
0x15,
0x0,
0x25,
0x2,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x30,
0x8,
0x0A,
0x31,
0x8,
0x0A,
0x32,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x16,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x40,
0x8,
0x0A,
0x41,
0x8,
0x0A,
0x42,
0x8,
0x0A,
0x43,
0x8,
0x0A,
0x44,
0x8,
0x0A,
0x45,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x19,
0x3,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x50,
0x8,
0x0A,
0x51,
0x8,
0x0A,
0x52,
0x8,
0x0A,
0x53,
0x8,
0x0A,
0x54,
0x8,
0x0A,
0x55,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0xB1,
0x0,
0xC0,
0x0A,
0x0E,
0x3,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x43,
0x45,
0x15,
0x0,
0x26,
0x3,
0x0,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x43,
0x55,
0x15,
0x0,
0x26,
0x3,
0x0,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x43,
0x15,
0x15,
0x0,
0x26,
0xFF,
0xFF,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x4D,
0x25,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x4D,
0x35,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x4,
0x3,
0x15,
0x0,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0xB1,
0x2,
0x0A,
0x8,
0x3,
0x75,
0x10,
0x95,
0x6,
0xB1,
0x3,
0x5,
0x20,
0x0A,
0x1,
0x2,
0x15,
0x0,
0x25,
0x6,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x0,
0x8,
0x0A,
0x1,
0x8,
0x0A,
0x2,
0x8,
0x0A,
0x3,
0x8,
0x0A,
0x4,
0x8,
0x0A,
0x5,
0x8,
0x0A,
0x6,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x2,
0x2,
0x15,
0x0,
0x25,
0x5,
0x75,
0x8,
0x95,
0x1,
0xA1,
0x2,
0x0A,
0x10,
0x8,
0x0A,
0x11,
0x8,
0x0A,
0x12,
0x8,
0x0A,
0x13,
0x8,
0x0A,
0x14,
0x8,
0x0A,
0x15,
0x8,
0x81,
0x0,
0xC0,
0x0A,
0x44,
0x5,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0x0A,
0x45,
0x5,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0x0A,
0x46,
0x5,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0x0A,
0x47,
0x5,
0x16,
0x1,
0x80,
0x26,
0xFF,
0x7F,
0x75,
0x10,
0x95,
0x1,
0x55,
0x0,
0x81,
0x2,
0xC0,
0xFFC,
0xFFA,
0x5,
0x0,
0x31,
0x2,
0x6,
0x0,
0xFFB,
0x21,
0x0,
0x1,
0x1,
0x2,
0x3,
0x2,
0x64,
0x0,
0x4,
0x0,
0x4,
0x0,
0xC8,
0x0,
0xD0,
0x7,
0x30,
0xF8,
0x0A,
0x0,
0x4D,
0x0,
0x43,
0x0,
0x48,
0x0,
0x50,
0x0,
0x73,
0x0,
0x66,
0xFFC,
0xFFA,
0x5,
0x0,
0x33,
0x2,
0x6,
0x0,
0xFFB,
0x21,
0x0,
0x3,
0x1,
0x2,
0x3,
0x2,
0x64,
0x0,
0x1,
0x0,
0x1,
0x0,
0x14,
0x0,
0x20,
0x4E,
0xE0,
0xB1,
0x0A,
0x0,
0x4D,
0x0,
0x43,
0x0,
0x48,
0x0,
0x50,
0x0,
0x73,
0x0,
0x66,
0xFFC,
0xFFA,
0x5,
0x0,
0x32,
0x2,
0x6,
0x0,
0xFFB,
0x21,
0x0,
0x2,
0x1,
0x2,
0x3,
0x2,
0x64,
0x0,
0x1,
0x0,
0x1,
0x0,
0x1,
0x0,
0x68,
0x1,
0x0,
0x0,
0x0A,
0x0,
0x4D,
0x0,
0x43,
0x0,
0x48,
0x0,
0x50,
0x0,
0x73,
0x0,
0x66,
0xFFC,
0xFFA,
0x5,
0x0,
0x35,
0x2,
0x6,
0x0,
0xFFB,
0x21,
0x0,
0x5,
0x1,
0x2,
0x3,
0x2,
0x64,
0x0,
0x1,
0x0,
0x1,
0x0,
0x0A,
0x0,
0xE8,
0x3,
0x18,
0xFC,
0x0A,
0x0,
0x4D,
0x0,
0x43,
0x0,
0x48,
0x0,
0x50,
0x0,
0x73,
0x0,
0x66,
0xFFC,
0xFFA,
0x5,
0x0,
0x34,
0x2,
0x6,
0x0,
0xFFB,
0x21,
0x0,
0x4,
0x1,
0x2,
0x3,
0x2,
0x64,
0x0,
0x1,
0x0,
0x1,
0x0,
0x1,
0x0,
0x68,
0x1,
0x98,
0xFE,
0x0A,
0x0,
0x4D,
0x0,
0x43,
0x0,
0x48,
0x0,
0x50,
0x0,
0x73,
0x0,
0x66,
0xFFC,
0xFFA,
0x5,
0x0,
0x36,
0x2,
0x6,
0x0,
0xFFB,
0x21,
0x0,
0x6,
0x1,
0x2,
0x3,
0x2,
0x64,
0x0,
0x1,
0x0,
0x1,
0x0,
0x5,
0x0,
0xFF,
0x7F,
0x1,
0x80,
0x0A,
0x0,
0x4D,
0x0,
0x56,
0x0,
0x41,
0x0,
0x30,
0x0,
0x31,
0x0,
0x0,
0xFFC,
0xFFA,
0x5,
0x0,
0x37,
0x2,
0x6,
0x0,
0xFFB,
0x21,
0x0,
0x7,
0x1,
0x2,
0x3,
0x2,
0x64,
0x0,
0x1,
0x0,
0x1,
0x0,
0x5,
0x0,
0xFF,
0x7F,
0x1,
0x80,
0x0A,
0x0,
0x4D,
0x0,
0x56,
0x0,
0x41,
0x0,
0x30,
0x0,
0x32,
0x0,
0x0,
0xFFC,
0xFFA,
0x5,
0x0,
0x38,
0x2,
0x6,
0x0,
0xFFB,
0x21,
0x0,
0x8,
0x1,
0x2,
0x3,
0x2,
0x64,
0x0,
0x1,
0x0,
0x1,
0x0,
0x5,
0x0,
0xFF,
0x7F,
0x1,
0x80,
0x0A,
0x0,
0x4D,
0x0,
0x56,
0x0,
0x41,
0x0,
0x30,
0x0,
0x33,
0x0,
0x0,
0xFFC,
0xFFA,
0x5,
0x0,
0x31,
0x2,
0x6,
0x0,
0xFFB,
0x21,
0x0,
0x1,
0x1,
0x2,
0x3,
0x2,
0x64,
0x0,
0x4,
0x0,
0x4,
0x0,
0xC8,
0x0,
0xD0,
0x7,
0x30,
0xF8,
0x0A,
0x0,
0x4D,
0x0,
0x43,
0x0,
0x48,
0x0,
0x50,
0x0,
0x73,
0x0,
0x66,
0xFFC
};
//******************************************************************************
//******************************************************************************
//* F U N C T I O N S
//******************************************************************************
static inline void ConfigI2C4(void)
{
    I2C4CON= 0x00;
    I2C4STAT= 0x00;
    I2C4TRN= 0x00;
    I2C4RCV= 0x00;
    I2C4BRG= 0;
    I2C4BRG= 0x0012; //400kHz przy 16 MHz cz. taktowania, wg wzoru z dokument.
    //I2C4CONbits.DISSLW = 1; //slew  rate control disabled for standard speed (100 kHz) mode
    //I2C4CONbits.RCEN = 1;
}

static inline void OnI2C4(void)
{
    I2C4CONbits.ON= 1;
}
 
void MM7150attendance(void) 
{
    switch(IMUstate)
    {
        case I2Cunconfigured:
            ConfigI2C4();
            OnI2C4();
            IMUstate= ResetMM7150;
            IMUConfigSequence= ConfigIdle;
            IMUReadSequence= IdleRead;
            IMUReadingStates= WaitingForConfig;
            TabToSend= IMUinitVal;
            BytesToRead= 0;
            MaxInd= 3633;
            Temp= 0;
            Wait= 0;  
            Wait5s= 0;      
            PeriodPrivate= 0;
            IntPinAsIn;
            ResPinAsOut;
            ResPinLow;    
            break;
            
        case ResetMM7150:  
            ResPinHigh;
            IMUstate= IdleIMU;
            break;
            
        case IdleIMU:
            Wait++;
            if(Wait > COUNTER_1S)
                Wait= COUNTER_1S;
            if(Wait== COUNTER_1S)
            {
                if(IMUReadReqest==0xF)
                {
                    StartI2C= 1; //assert start condition
                    IMUstate= InitIMU;
                }       
            }
            break;
            
        case InitIMU:
            if(IMUConfigSequence==ConfigIdle)
            {
                ReadOrWrite= WriteI2C;    
                IMUstate= Writing;
                IMUConfigSequence= Starting;  
            }
            else
            {
                IMUstate= I2Cunconfigured;
                //log error                
            }
            break;
            
        case Writing:
            ReadOrWrite= WriteI2C;
            if(*(TabToSend+Temp)==0xFFB)
            {
                IMUstate= Reading;
                ReadOrWrite= ReadI2C;                
            }                             
            break;
            
        case Reading:     
            ReadOrWrite= ReadI2C;
            if(*(TabToSend+Temp)==0xFFA)
            {
                IMUstate= Writing;
                ReadOrWrite= WriteI2C;   
            }               
            break;            
            
        case ReadData:
            break;
            
        default:
            IMUstate= I2Cunconfigured;
            IMUConfigSequence= ConfigIdle;
            //log error
            break;
    }
    switch(IMUConfigSequence)
    {
        case ConfigIdle:
            break;
        
        case Starting:
            if(StartI2C==0)// Start send?
            {        
                SendBufI2C= ReadOrWrite; //Assert byte to send  
                if(IMUstate==Writing)
                    IMUConfigSequence= AckingSlave;
                else
                    IMUConfigSequence= AckingMaster;
                Temp++;
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }      
            break;
            
        case AckingSlave:
            if(TransFlagI2C==0)// Byte send?
            {
                if(ACKFlagI2C==0)//Ack was receive?
                {
                    if((*(TabToSend+Temp)==0xFFA)||(*(TabToSend+Temp)==0xFFB))
                    {   
                        if(Temp==44)
                            IMUConfigSequence= Stoping;
                        else
                        {
                            RepeatStartI2C= 1;//Assert repeat start condition
                            IMUConfigSequence= RepeatStarting;     
                        }
                    }
                    else
                    {
                        if(IMUstate==Reading)
                        {                  
                            SetReceiveI2C= 1;//Set I2C to receive
                            IMUConfigSequence= Read;                                
                        }
                        else 
                        {
                            SendBufI2C= *(TabToSend+Temp); //Assert byte to send
                            IMUConfigSequence= AckingSlave;
                            Temp++;
                        }
                    }
                }
                else//Ack error
                {                   
                    IMUstate= I2Cunconfigured;
                    //Log error
                }  
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }      
            break;
            
        case RepeatStarting:
            if(RepeatStartI2C==0)//Repeat start send?
            {
                SendBufI2C= ReadOrWrite; //Assert byte to send
                if(IMUstate==Writing)
                    IMUConfigSequence= AckingSlave;
                else
                    IMUConfigSequence= AckingMaster;
                Temp++;
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }       
            break; 
            
        case AckingMaster:
            if(SendConfirmI2C==0)//Ack was send?
            {
                if(*(TabToSend+Temp)==0xFFA)
                {
                    RepeatStartI2C= 1;//Assert repeat start condition
                    IMUConfigSequence= RepeatStarting;
                }
                else
                {                       
                    SetReceiveI2C= 1; //Set I2C to receive     
                    IMUConfigSequence= Read;
                }
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }      
            break;
            
        case Read:        
            if(SetReceiveI2C==0)//Byte received?
            {
                ReadValue= ReceiveBufI2C;
                if(*(TabToSend+Temp)==0xFFC)
                {
                    NACKtoSendI2C;//NAK to send  
                    SendConfirmI2C= 1; //Send Ack  
                    IMUConfigSequence= Stoping;   
                }
                else if(ReadValue==(*(TabToSend+Temp)))
                {
                    ACKtoSendI2C;//Ack to send
                    SendConfirmI2C= 1; //Send Ack  
                    IMUConfigSequence= AckingMaster; 
                }
                else 
                {
                    ACKtoSendI2C;//Ack to send
                    SendConfirmI2C= 1; //Send Ack  
                    IMUConfigSequence= AckingMaster; 
                }                                        
                Temp++;                        
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }      
            break;
            
        case WaitForInterrupt:
            if(IntState==0)                
            {
                StartI2C= 1;
                IMUConfigSequence= Starting; 
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }      
            break;
            
        case Stoping:
            if(SendConfirmI2C==0)
            {
                StopI2C= 1;
                IMUConfigSequence= Stop;
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }         
            break;
            
        case Stop:
            if(StopI2C==0)
            {   
                Wait5s= 0;
                if(Temp==MaxInd)
                {     
                    IMUstate= IdleIMU;      
                    IMUConfigSequence= ConfigIdle;
                    IMUReadSequence= IdleRead;
                    IMUReadingStates++;
                                        
                    switch(IMUReadingStates)
                    {
                        case WaitingForConfig:
                            break;
                            
                        case SendingAccON:
                            TabToSend= GetAcc;
                            MaxInd= 369;
                            break;
                            
                        case SendingCompON:  
                            TabToSend= GetCompas;
                            MaxInd= 369;
                            break;
                            
                        case SendingInciON:                               
                            TabToSend= GetIncli;
                            MaxInd= 369; 
                            break;
                            
                        case ReceivingData:                        
                            IMUReadSequence= WaitingForData;
                            IMUstate= ReadData;   
                            break;
                            
                        default:
                            //Log error
                            break;
                    }
                    Temp= 0;
                }
                else
                {
                    if(Temp==44)
                    {
                        if(IMUReadingStates==WaitingForConfig)
                            IMUConfigSequence= WaitForInterrupt;   
                    }
                    else
                    {
                        StartI2C= 1;
                        IMUConfigSequence= Starting;   
                    } 
                }
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }         
            break;
            
        default:
            IMUstate= I2Cunconfigured;
            //Log error
            break;        
    }    
    switch(IMUReadSequence)
    {
        case IdleRead:
            break;
            
        case WaitingForData:   
            Wait5s= 0;
            PeriodPrivate++;
            IntState= IntPin;
            if(IntState==0)                
            {   
                StartI2C= 1;
                IMUReadSequence= StartingRead; 
            }
            if(LastIntState>IntState)
            {                
                PeriodGlobal= PeriodPrivate;
                PeriodPrivate= 0;   
            }           
            LastIntState= IntPin;              
            Wait5s++;
            if(Wait5s==COUNTER_5S)
            {
                IMUstate= I2Cunconfigured;
                //Log error 
            }   
            break;
            
        case StartingRead:       
            PeriodPrivate++;     
            if(StartI2C==0)// Start send?
            {        
                SendBufI2C= ReadI2C; //Read byte to send  
                IMUReadSequence= WritingAddress;
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }  
            break;
            
        case WritingAddress:
            PeriodPrivate++;
            if(TransFlagI2C==0)// Byte send?
            {
                if(ACKFlagI2C==0)//Ack was receive?
                {
                    SetReceiveI2C= 1; //Set I2C to receive  
                    IMUReadSequence= ReadingLenghtPart1;                    
                }
                else//Ack error
                {                   
                    IMUstate= I2Cunconfigured;
                    //Log error
                }   
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }        
            break;
            
        case ReadingLenghtPart1:
            PeriodPrivate++;
            if(SetReceiveI2C==0)//Byte received?
            {
                BytesToRead= ReceiveBufI2C;
                BytesToRead--;
                ACKtoSendI2C;//Ack to send
                SendConfirmI2C= 1; //Send Ack     
                IMUReadSequence= SendingConfirm; 
                IMUNextReadSequence= ReadingLenghtPart2;
            }   
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }                
            break;
            
        case ReadingLenghtPart2:
            PeriodPrivate++;
            if(SetReceiveI2C==0)//Byte received?
            {
                ReceiveBufI2C;            
                BytesToRead--;
                ACKtoSendI2C;//Ack to send
                SendConfirmI2C= 1; //Send Ack     
                IMUReadSequence= SendingConfirm; 
                IMUNextReadSequence= ReadingType;
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }       
            break;
            
        case ReadingType:
            PeriodPrivate++;
            if(SetReceiveI2C==0)//Byte received?
            {
                LastTypeRead= TypeRead;
                TypeRead= ReceiveBufI2C;           
                if((TypeRead==1)||(TypeRead==2)||(TypeRead==4))
                {
                    BytesToRead--;   
                    ACKtoSendI2C;//Ack to send
                    SendConfirmI2C= 1; //Send Ack     
                    IMUReadSequence= SendingConfirm; 
                    IMUNextReadSequence= ReadingState;  
                }
                else
                {
                    IMUstate= I2Cunconfigured;
                    //Log error                     
                }
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }   
            break;
            
        case ReadingState:
            PeriodPrivate++;
            if(SetReceiveI2C==0)//Byte received?
            {
                ReceiveBufI2C;         
                BytesToRead--;       
                IMUReadSequence= SendingConfirm; 
                IMUNextReadSequence= ReadingEvent;   
                ACKtoSendI2C;//Ack to send
                SendConfirmI2C= 1; //Send Ack    
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }       
            break;
            
        case ReadingEvent:
            PeriodPrivate++;
            if(SetReceiveI2C==0)//Byte received?
            {
                ReceiveBufI2C;         
                BytesToRead--;       
                IMUReadSequence= SendingConfirm; 
                if(TypeRead==2)
                    IMUNextReadSequence= ReadingDegreesPart1;          
                else 
                    IMUNextReadSequence= ReadingXL;   
                ACKtoSendI2C;//Ack to send
                SendConfirmI2C= 1; //Send Ack  
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }       
            break;
            
        case ReadingDegreesPart1:
            PeriodPrivate++;
            if(SetReceiveI2C==0)//Byte received?
            {
                DegPart1= ReceiveBufI2C;         
                BytesToRead--; 
                IMUReadSequence= SendingConfirm; 
                IMUNextReadSequence= ReadingDegreesPart2; 
                ACKtoSendI2C;//Ack to send
                SendConfirmI2C= 1; //Send Ack    
            }            
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }       
            break;
            
        case ReadingDegreesPart2:
            PeriodPrivate++;
            if(SetReceiveI2C==0)//Byte received?
            {
                DegPart2= ReceiveBufI2C;       
                BytesToRead--; 
                IMUReadSequence= SendingConfirm; 
                IMUNextReadSequence= ReadingXL; 
                ACKtoSendI2C;//Ack to send
                SendConfirmI2C= 1; //Send Ack  
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }         
            break;
            
        case ReadingXL:
            PeriodPrivate++;
            if(SetReceiveI2C==0)//Byte received?
            {
                XL= ReceiveBufI2C;         
                BytesToRead--;       
                IMUReadSequence= SendingConfirm; 
                IMUNextReadSequence= ReadingXH; 
                ACKtoSendI2C;//Ack to send
                SendConfirmI2C= 1; //Send Ack     
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }      
            break;
            
        case ReadingXH:
            PeriodPrivate++;
            if(SetReceiveI2C==0)//Byte received?
            {
                XH= ReceiveBufI2C;     
                BytesToRead--;       
                IMUReadSequence= SendingConfirm; 
                IMUNextReadSequence= ReadingYL; 
                ACKtoSendI2C;//Ack to send
                SendConfirmI2C= 1; //Send Ack   
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }        
            break;
            
        case ReadingYL:
            PeriodPrivate++;
            if(SetReceiveI2C==0)//Byte received?
            {
                YL= ReceiveBufI2C;         
                BytesToRead--;       
                IMUReadSequence= SendingConfirm; 
                IMUNextReadSequence= ReadingYH; 
                ACKtoSendI2C;//Ack to send
                SendConfirmI2C= 1; //Send Ack   
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }         
            break;
            
        case ReadingYH:
            PeriodPrivate++;
            if(SetReceiveI2C==0)//Byte received?
            {
                YH= ReceiveBufI2C;    
                BytesToRead--;       
                IMUReadSequence= SendingConfirm; 
                IMUNextReadSequence= ReadingZL; 
                ACKtoSendI2C;//Ack to send
                SendConfirmI2C= 1; //Send Ack    
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }        
            break;
            
        case ReadingZL:
            PeriodPrivate++;
            if(SetReceiveI2C==0)//Byte received?
            {
                ZL= ReceiveBufI2C;         
                BytesToRead--;       
                IMUReadSequence= SendingConfirm; 
                IMUNextReadSequence= ReadingZH; 
                ACKtoSendI2C;//Ack to send
                SendConfirmI2C= 1; //Send Ack    
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }        
            break;
            
        case ReadingZH:
            PeriodPrivate++;
            if(SetReceiveI2C==0)//Byte received?
            {
                ZH= ReceiveBufI2C;         
                BytesToRead--;   
                if(BytesToRead>0)
                {
                    IMUReadSequence= SendingConfirm; 
                    IMUNextReadSequence= ReadingShake;    
                    ACKtoSendI2C;//Ack to send
                    SendConfirmI2C= 1; //Send Ack                 
                }
                else
                {                
                    NACKtoSendI2C;//Ack to send
                    SendConfirmI2C= 1; //Send Ack    
                    IMUReadSequence= SendingConfirm; 
                }
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }    
            break;
            
        case ReadingShake:
            PeriodPrivate++;  
            if(SetReceiveI2C==0)//Byte received?
            { 
                ReceiveBufI2C;    
                BytesToRead--;    
                IMUReadSequence= SendingConfirm;  
                NACKtoSendI2C;//Ack to send
                SendConfirmI2C= 1; //Send Ack  
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }      
            break;
            
        case StopingRead:
            PeriodPrivate++;
            if(StopI2C==0)
            { 
                IMUReadSequence= WaitingForData;  
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }      
            break;
            
        case SendingConfirm:      
            PeriodPrivate++;      
            if(SendConfirmI2C==0)//Ack or Nak was send?
            {
                if(BytesToRead>0)
                {
                    SetReceiveI2C= 1; //Set I2C to receive  
                    IMUReadSequence= IMUNextReadSequence;
                }
                else
                {
                    if(TypeRead==1)
                    {
                        AccelerometerX= XH;
                        AccelerometerX= (AccelerometerX<<8)|XL;
                        AccelerometerY= YH;
                        AccelerometerY= (AccelerometerY<<8)|YL;
                        AccelerometerZ= ZH;
                        AccelerometerZ= (AccelerometerZ<<8)|ZL;                       
                    } 
                    else if(TypeRead==2)
                    {
                        if(DegPart2==0)
                            Compass= DegPart1;
                        else
                            Compass= 256+DegPart1;                        
                    }
                    else
                    {
                        if(XH==1)
                            InclinometerX= 256+XL;
                        else
                            InclinometerX= XL;
                        if(YH==1)
                            InclinometerY= 256+YL;
                        else
                            InclinometerY= YL;
                        if(ZH==1)
                            InclinometerZ= 256+ZL;
                        else
                            InclinometerZ= ZL;                         
                    }
                    StopI2C= 1;
                    IMUReadSequence= StopingRead;
                }
            }
            else
            {
                Wait5s++;
                if(Wait5s==COUNTER_5S)
                {
                    IMUstate= I2Cunconfigured;
                    //Log error 
                }      
            }      
            break;
            
        default:
            IMUstate= I2Cunconfigured;
            //Log error
            break;
    }
}